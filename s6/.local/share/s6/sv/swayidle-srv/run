#!/usr/bin/execlineb -P

fdmove -c 2 1
importas -S HOME
importas -SD ${HOME}/.local/share XDG_DATA_HOME
envfile ${XDG_DATA_HOME}/s6/config/swayidle.conf

multisubstitute {
    importas -Su SCREENSAVER_TIMEOUT
    importas -Su DPMS_TIMEOUT
}

swayidle -w
lock "swaylock -f"
timeout $SCREENSAVER_TIMEOUT "swaylock -f"
timeout $DPMS_TIMEOUT "wlr-dpms off"
resume "wlr-dpms on"
before-sleep "swaylock -f"
